<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>caveclient.frameworkclient &mdash; CAVEclient 1.0 documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../_static/doctools.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html" class="icon icon-home"> CAVEclient
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../guide/intro.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../guide/framework.html">CAVEclient: One client for all services</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../guide/authentication.html">Authentication Service</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../guide/annotation.html">AnnotationEngine</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../guide/chunkedgraph.html">ChunkedGraph</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../guide/info.html">Info Service</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../guide/schemas.html">EMAnnotationSchemas</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../guide/state.html">JSON Neuroglancer State Service</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../guide/materialization.html">Materialization</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../api/caveclient.html">caveclient package</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">CAVEclient</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../index.html">Module code</a> &raquo;</li>
      <li>caveclient.frameworkclient</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <h1>Source code for caveclient.frameworkclient</h1><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">.annotationengine</span> <span class="kn">import</span> <span class="n">AnnotationClient</span>
<span class="kn">from</span> <span class="nn">.auth</span> <span class="kn">import</span> <span class="n">AuthClient</span><span class="p">,</span> <span class="n">default_token_file</span>
<span class="kn">from</span> <span class="nn">.chunkedgraph</span> <span class="kn">import</span> <span class="n">ChunkedGraphClient</span>
<span class="kn">from</span> <span class="nn">.emannotationschemas</span> <span class="kn">import</span> <span class="n">SchemaClient</span>
<span class="kn">from</span> <span class="nn">.infoservice</span> <span class="kn">import</span> <span class="n">InfoServiceClient</span>
<span class="kn">from</span> <span class="nn">.jsonservice</span> <span class="kn">import</span> <span class="n">JSONService</span>
<span class="kn">from</span> <span class="nn">.materializationengine</span> <span class="kn">import</span> <span class="n">MaterializationClient</span>
<span class="kn">from</span> <span class="nn">.l2cache</span> <span class="kn">import</span> <span class="n">L2CacheClient</span>
<span class="kn">from</span> <span class="nn">.endpoints</span> <span class="kn">import</span> <span class="n">default_global_server_address</span>

<span class="n">DEFAULT_RETRIES</span> <span class="o">=</span> <span class="mi">3</span>


<div class="viewcode-block" id="GlobalClientError"><a class="viewcode-back" href="../../api/caveclient.html#caveclient.frameworkclient.GlobalClientError">[docs]</a><span class="k">class</span> <span class="nc">GlobalClientError</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
    <span class="k">pass</span></div>


<div class="viewcode-block" id="CAVEclient"><a class="viewcode-back" href="../../api/caveclient.html#caveclient.frameworkclient.CAVEclient">[docs]</a><span class="k">class</span> <span class="nc">CAVEclient</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__new__</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span>
        <span class="n">datastack_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">server_address</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">auth_token_file</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">auth_token_key</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">auth_token</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">global_only</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">max_retries</span><span class="o">=</span><span class="n">DEFAULT_RETRIES</span><span class="p">,</span>
        <span class="n">pool_maxsize</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">pool_block</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">desired_resolution</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">info_cache</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;A manager for all clients sharing common datastack and authentication information.</span>

<span class="sd">        This client wraps all the other clients and keeps track of the things that need to be consistent across them.</span>
<span class="sd">        To instantiate a client:</span>

<span class="sd">        .. code:: python</span>

<span class="sd">            client = CAVEclient(datastack_name=&#39;my_datastack&#39;,</span>
<span class="sd">                                    server_address=&#39;www.myserver.com&#39;,</span>
<span class="sd">                                    auth_token_file=&#39;~/.mysecrets/secrets.json&#39;)</span>

<span class="sd">        Then</span>
<span class="sd">        * client.info is an InfoService client (see infoservice.InfoServiceClient)</span>
<span class="sd">        * client.state is a neuroglancer state client (see jsonservice.JSONService)</span>
<span class="sd">        * client.schema is an EM Annotation Schemas client (see emannotationschemas.SchemaClient)</span>
<span class="sd">        * client.chunkedgraph is a Chunkedgraph client (see chunkedgraph.ChunkedGraphClient)</span>
<span class="sd">        * client.annotation is an Annotation DB client (see annotationengine.AnnotationClient)</span>

<span class="sd">        All subclients are loaded lazily and share the same datastack name, server address, and auth tokens where used.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        datastack_name : str, optional</span>
<span class="sd">            Datastack name for the services. Almost all services need this and will not work if it is not passed.</span>
<span class="sd">        server_address : str or None</span>
<span class="sd">            URL of the framework server. If None, chooses the default server global.daf-apis.com.</span>
<span class="sd">            Optional, defaults to None.</span>
<span class="sd">        auth_token_file : str or None</span>
<span class="sd">            Path to a json file containing the auth token. If None, uses the default location. See Auth client documentation.</span>
<span class="sd">            Optional, defaults to None.</span>
<span class="sd">        auth_token_key : str</span>
<span class="sd">            Dictionary key for the token in the the JSON file.</span>
<span class="sd">            Optional, default is &#39;token&#39;.</span>
<span class="sd">        auth_token : str or None</span>
<span class="sd">            Direct entry of an auth token. If None, uses the file arguments to find the token.</span>
<span class="sd">            Optional, default is None.</span>
<span class="sd">        max_retries : int or None, optional</span>
<span class="sd">            Sets the default number of retries on failed requests. Optional, by default 2.</span>
<span class="sd">        pool_maxsize : int or None, optional</span>
<span class="sd">            Sets the max number of threads in a requests pool, although this value will be exceeded if pool_block is set to False. Optional, uses requests defaults if None.</span>
<span class="sd">        pool_block: bool or None, optional</span>
<span class="sd">            If True, prevents the number of threads in a requests pool from exceeding the max size. Optional, uses requests defaults (False) if None.</span>
<span class="sd">        desired_resolution : Iterable[float]or None, optional</span>
<span class="sd">            If given, should be a list or array of the desired resolution you want queries returned in</span>
<span class="sd">            useful for materialization queries.</span>
<span class="sd">        info_cache: dict or None, optional</span>
<span class="sd">            Pre-computed info cache, bypassing the lookup of datastack info from the info service. Should only be used in cases where this information is cached and thus repetitive lookups can be avoided.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">global_only</span> <span class="ow">or</span> <span class="n">datastack_name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">CAVEclientGlobal</span><span class="p">(</span>
                <span class="n">server_address</span><span class="o">=</span><span class="n">server_address</span><span class="p">,</span>
                <span class="n">auth_token_file</span><span class="o">=</span><span class="n">auth_token_file</span><span class="p">,</span>
                <span class="n">auth_token_key</span><span class="o">=</span><span class="n">auth_token_key</span><span class="p">,</span>
                <span class="n">auth_token</span><span class="o">=</span><span class="n">auth_token</span><span class="p">,</span>
                <span class="n">max_retries</span><span class="o">=</span><span class="n">max_retries</span><span class="p">,</span>
                <span class="n">pool_maxsize</span><span class="o">=</span><span class="n">pool_maxsize</span><span class="p">,</span>
                <span class="n">pool_block</span><span class="o">=</span><span class="n">pool_block</span><span class="p">,</span>
                <span class="n">info_cache</span><span class="o">=</span><span class="n">info_cache</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">CAVEclientFull</span><span class="p">(</span>
                <span class="n">datastack_name</span><span class="o">=</span><span class="n">datastack_name</span><span class="p">,</span>
                <span class="n">server_address</span><span class="o">=</span><span class="n">server_address</span><span class="p">,</span>
                <span class="n">auth_token_file</span><span class="o">=</span><span class="n">auth_token_file</span><span class="p">,</span>
                <span class="n">auth_token_key</span><span class="o">=</span><span class="n">auth_token_key</span><span class="p">,</span>
                <span class="n">auth_token</span><span class="o">=</span><span class="n">auth_token</span><span class="p">,</span>
                <span class="n">max_retries</span><span class="o">=</span><span class="n">max_retries</span><span class="p">,</span>
                <span class="n">pool_maxsize</span><span class="o">=</span><span class="n">pool_maxsize</span><span class="p">,</span>
                <span class="n">pool_block</span><span class="o">=</span><span class="n">pool_block</span><span class="p">,</span>
                <span class="n">desired_resolution</span><span class="o">=</span><span class="n">desired_resolution</span><span class="p">,</span>
                <span class="n">info_cache</span><span class="o">=</span><span class="n">info_cache</span><span class="p">,</span>
            <span class="p">)</span></div>


<div class="viewcode-block" id="CAVEclientGlobal"><a class="viewcode-back" href="../../api/caveclient.html#caveclient.frameworkclient.CAVEclientGlobal">[docs]</a><span class="k">class</span> <span class="nc">CAVEclientGlobal</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A manager for all clients sharing common datastack and authentication information.</span>

<span class="sd">    This client wraps all the other clients and keeps track of the things that need to be consistent across them.</span>
<span class="sd">    To instantiate a client:</span>

<span class="sd">    .. code:: python</span>

<span class="sd">        client = CAVEclient(datastack_name=&#39;my_datastack&#39;,</span>
<span class="sd">                                 server_address=&#39;www.myserver.com&#39;,</span>
<span class="sd">                                 auth_token_file=&#39;~/.mysecrets/secrets.json&#39;)</span>

<span class="sd">    Then</span>
<span class="sd">    * client.info is an InfoService client (see infoservice.InfoServiceClient)</span>
<span class="sd">    * client.auth handles authentication</span>
<span class="sd">    * client.state is a neuroglancer state client (see jsonservice.JSONService)</span>
<span class="sd">    * client.schema is an EM Annotation Schemas client (see emannotationschemas.SchemaClient)</span>

<span class="sd">    All subclients are loaded lazily and share the same datastack name, server address, and auth tokens (where used).</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    server_address : str or None</span>
<span class="sd">        URL of the framework server. If None, chooses the default server global.daf-apis.com.</span>
<span class="sd">        Optional, defaults to None.</span>
<span class="sd">    auth_token_file : str or None</span>
<span class="sd">        Path to a json file containing the auth token. If None, uses the default location. See Auth client documentation.</span>
<span class="sd">        Optional, defaults to None.</span>
<span class="sd">    auth_token_key : str</span>
<span class="sd">        Dictionary key for the token in the the JSON file.</span>
<span class="sd">        Optional, default is &#39;token&#39;.</span>
<span class="sd">    auth_token : str or None</span>
<span class="sd">        Direct entry of an auth token. If None, uses the file arguments to find the token.</span>
<span class="sd">        Optional, default is None.</span>
<span class="sd">    max_retries : int or None, optional</span>
<span class="sd">        Sets the default number of retries on failed requests. Optional, by default 2.</span>
<span class="sd">    pool_maxsize : int or None, optional</span>
<span class="sd">        Sets the max number of threads in a requests pool, although this value will be exceeded if pool_block is set to False. Optional, uses requests defaults if None.</span>
<span class="sd">    pool_block: bool or None, optional</span>
<span class="sd">        If True, prevents the number of threads in a requests pool from exceeding the max size. Optional, uses requests defaults (False) if None.</span>
<span class="sd">    info_cache: dict or None, optional</span>
<span class="sd">        Pre-computed info cache, bypassing the lookup of datastack info from the info service. Should only be used in cases where this information is cached and thus repetitive lookups can be avoided.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">server_address</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">auth_token_file</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">auth_token_key</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">auth_token</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">max_retries</span><span class="o">=</span><span class="n">DEFAULT_RETRIES</span><span class="p">,</span>
        <span class="n">pool_maxsize</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">pool_block</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">info_cache</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="k">if</span> <span class="n">server_address</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">server_address</span> <span class="o">=</span> <span class="n">default_global_server_address</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_server_address</span> <span class="o">=</span> <span class="n">server_address</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_auth_config</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">change_auth</span><span class="p">(</span>
            <span class="n">auth_token_file</span><span class="o">=</span><span class="n">auth_token_file</span><span class="p">,</span>
            <span class="n">auth_token_key</span><span class="o">=</span><span class="n">auth_token_key</span><span class="p">,</span>
            <span class="n">auth_token</span><span class="o">=</span><span class="n">auth_token</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_max_retries</span> <span class="o">=</span> <span class="n">max_retries</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_pool_maxsize</span> <span class="o">=</span> <span class="n">pool_maxsize</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_pool_block</span> <span class="o">=</span> <span class="n">pool_block</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_info_cache</span> <span class="o">=</span> <span class="n">info_cache</span>

<div class="viewcode-block" id="CAVEclientGlobal.change_auth"><a class="viewcode-back" href="../../api/caveclient.html#caveclient.frameworkclient.CAVEclientGlobal.change_auth">[docs]</a>    <span class="k">def</span> <span class="nf">change_auth</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">auth_token_file</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">auth_token_key</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">auth_token</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Change the authentication token and reset services.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        auth_token_file : str, optional</span>
<span class="sd">            New auth token json file path, by default None, which defaults to the existing state.</span>
<span class="sd">        auth_token_key : str, optional</span>
<span class="sd">            New dictionary key under which the token is stored in the json file, by default None,</span>
<span class="sd">            which defaults to the existing state.</span>
<span class="sd">        auth_token : str, optional</span>
<span class="sd">            Direct entry of a new token, by default None.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">auth_token_file</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">auth_token_file</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_auth_config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;auth_token_file&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">auth_token_key</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">auth_token_key</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_auth_config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;auth_token_key&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_auth_config</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;token_file&quot;</span><span class="p">:</span> <span class="n">auth_token_file</span><span class="p">,</span>
            <span class="s2">&quot;token_key&quot;</span><span class="p">:</span> <span class="n">auth_token_key</span><span class="p">,</span>
            <span class="s2">&quot;token&quot;</span><span class="p">:</span> <span class="n">auth_token</span><span class="p">,</span>
            <span class="s2">&quot;server_address&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_server_address</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_reset_services</span><span class="p">()</span></div>

    <span class="k">def</span> <span class="nf">_reset_services</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_auth</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_info</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_state</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_schema</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">server_address</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_server_address</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">auth</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_auth</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_auth</span> <span class="o">=</span> <span class="n">AuthClient</span><span class="p">(</span><span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">_auth_config</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_auth</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">info</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">InfoServiceClient</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_info</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_info</span> <span class="o">=</span> <span class="n">InfoServiceClient</span><span class="p">(</span>
                <span class="n">server_address</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">server_address</span><span class="p">,</span>
                <span class="n">datastack_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">datastack_name</span><span class="p">,</span>
                <span class="n">auth_client</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">auth</span><span class="p">,</span>
                <span class="n">max_retries</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_max_retries</span><span class="p">,</span>
                <span class="n">pool_maxsize</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_pool_maxsize</span><span class="p">,</span>
                <span class="n">pool_block</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_pool_block</span><span class="p">,</span>
                <span class="n">over_client</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span>
                <span class="n">info_cache</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_info_cache</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_info</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">state</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_state</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_state</span> <span class="o">=</span> <span class="n">JSONService</span><span class="p">(</span>
                <span class="n">server_address</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">server_address</span><span class="p">,</span>
                <span class="n">auth_client</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">auth</span><span class="p">,</span>
                <span class="n">max_retries</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_max_retries</span><span class="p">,</span>
                <span class="n">pool_maxsize</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_pool_maxsize</span><span class="p">,</span>
                <span class="n">pool_block</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_pool_block</span><span class="p">,</span>
                <span class="n">over_client</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_state</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">schema</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_schema</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_schema</span> <span class="o">=</span> <span class="n">SchemaClient</span><span class="p">(</span>
                <span class="n">server_address</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">server_address</span><span class="p">,</span>
                <span class="n">auth_client</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">auth</span><span class="p">,</span>
                <span class="n">max_retries</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_max_retries</span><span class="p">,</span>
                <span class="n">pool_maxsize</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_pool_maxsize</span><span class="p">,</span>
                <span class="n">pool_block</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_pool_block</span><span class="p">,</span>
                <span class="n">over_client</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_schema</span>

    <span class="k">def</span> <span class="nf">_no_local_functionality</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">GlobalClientError</span><span class="p">(</span>
            <span class="s2">&quot;Client in global-only mode because no datastack was set.&quot;</span>
        <span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">annotation</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_no_local_functionality</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">chunkedgraph</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_no_local_functionality</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">datastack_name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">None</span></div>


<div class="viewcode-block" id="CAVEclientFull"><a class="viewcode-back" href="../../api/caveclient.html#caveclient.frameworkclient.CAVEclientFull">[docs]</a><span class="k">class</span> <span class="nc">CAVEclientFull</span><span class="p">(</span><span class="n">CAVEclientGlobal</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A manager for all clients sharing common datastack and authentication information.</span>

<span class="sd">    This client wraps all the other clients and keeps track of the things that need to be consistent across them.</span>
<span class="sd">    To instantiate a client:</span>

<span class="sd">    .. code:: python</span>

<span class="sd">        client = CAVEclient(datastack_name=&#39;my_datastack&#39;,</span>
<span class="sd">                                 server_address=&#39;www.myserver.com&#39;,</span>
<span class="sd">                                 auth_token_file=&#39;~/.mysecrets/secrets.json&#39;)</span>

<span class="sd">    Then</span>
<span class="sd">    * client.info is an InfoService client (see infoservice.InfoServiceClient)</span>
<span class="sd">    * client.state is a neuroglancer state client (see jsonservice.JSONService)</span>
<span class="sd">    * client.schema is an EM Annotation Schemas client (see emannotationschemas.SchemaClient)</span>
<span class="sd">    * client.chunkedgraph is a Chunkedgraph client (see chunkedgraph.ChunkedGraphClient)</span>
<span class="sd">    * client.annotation is an Annotation DB client (see annotationengine.AnnotationClient)</span>

<span class="sd">    All subclients are loaded lazily and share the same datastack name, server address, and auth tokens where used.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    datastack_name : str, optional</span>
<span class="sd">        Datastack name for the services. Almost all services need this and will not work if it is not passed.</span>
<span class="sd">    server_address : str or None</span>
<span class="sd">        URL of the framework server. If None, chooses the default server global.daf-apis.com.</span>
<span class="sd">        Optional, defaults to None.</span>
<span class="sd">    auth_token_file : str or None</span>
<span class="sd">        Path to a json file containing the auth token. If None, uses the default location. See Auth client documentation.</span>
<span class="sd">        Optional, defaults to None.</span>
<span class="sd">    auth_token_key : str</span>
<span class="sd">        Dictionary key for the token in the the JSON file.</span>
<span class="sd">        Optional, default is &#39;token&#39;.</span>
<span class="sd">    auth_token : str or None</span>
<span class="sd">        Direct entry of an auth token. If None, uses the file arguments to find the token.</span>
<span class="sd">        Optional, default is None.</span>
<span class="sd">    max_retries : int or None, optional</span>
<span class="sd">        Sets the default number of retries on failed requests. Optional, by default 2.</span>
<span class="sd">    pool_maxsize : int or None, optional</span>
<span class="sd">        Sets the max number of threads in a requests pool, although this value will be exceeded if pool_block is set to False. Optional, uses requests defaults if None.</span>
<span class="sd">    pool_block: bool or None, optional</span>
<span class="sd">        If True, prevents the number of threads in a requests pool from exceeding the max size. Optional, uses requests defaults (False) if None.</span>
<span class="sd">    desired_resolution : Iterable[float]or None, optional</span>
<span class="sd">        If given, should be a list or array of the desired resolution you want queries returned in</span>
<span class="sd">        useful for materialization queries.</span>
<span class="sd">    info_cache: dict or None, optional</span>
<span class="sd">        Pre-computed info cache, bypassing the lookup of datastack info from the info service. Should only be used in cases where this information is cached and thus repetitive lookups can be avoided.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">datastack_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">server_address</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">auth_token_file</span><span class="o">=</span><span class="n">default_token_file</span><span class="p">,</span>
        <span class="n">auth_token_key</span><span class="o">=</span><span class="s2">&quot;token&quot;</span><span class="p">,</span>
        <span class="n">auth_token</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">max_retries</span><span class="o">=</span><span class="n">DEFAULT_RETRIES</span><span class="p">,</span>
        <span class="n">pool_maxsize</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">pool_block</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">desired_resolution</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">info_cache</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">CAVEclientFull</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
            <span class="n">server_address</span><span class="o">=</span><span class="n">server_address</span><span class="p">,</span>
            <span class="n">auth_token_file</span><span class="o">=</span><span class="n">auth_token_file</span><span class="p">,</span>
            <span class="n">auth_token_key</span><span class="o">=</span><span class="n">auth_token_key</span><span class="p">,</span>
            <span class="n">auth_token</span><span class="o">=</span><span class="n">auth_token</span><span class="p">,</span>
            <span class="n">max_retries</span><span class="o">=</span><span class="n">max_retries</span><span class="p">,</span>
            <span class="n">pool_maxsize</span><span class="o">=</span><span class="n">pool_maxsize</span><span class="p">,</span>
            <span class="n">pool_block</span><span class="o">=</span><span class="n">pool_block</span><span class="p">,</span>
            <span class="n">info_cache</span><span class="o">=</span><span class="n">info_cache</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_datastack_name</span> <span class="o">=</span> <span class="n">datastack_name</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_chunkedgraph</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_annotation</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_materialize</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_l2cache</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">desired_resolution</span> <span class="o">=</span> <span class="n">desired_resolution</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">local_server</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">info</span><span class="o">.</span><span class="n">local_server</span><span class="p">()</span>
        <span class="n">av_info</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">info</span><span class="o">.</span><span class="n">get_aligned_volume_info</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_aligned_volume_name</span> <span class="o">=</span> <span class="n">av_info</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">_reset_services</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_auth</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_info</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_state</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_schema</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_chunkedgraph</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_annotation</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_materialize</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_l2cache</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">datastack_name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_datastack_name</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">chunkedgraph</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_chunkedgraph</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">seg_source</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">info</span><span class="o">.</span><span class="n">segmentation_source</span><span class="p">()</span>
            <span class="n">table_name</span> <span class="o">=</span> <span class="n">seg_source</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_chunkedgraph</span> <span class="o">=</span> <span class="n">ChunkedGraphClient</span><span class="p">(</span>
                <span class="n">table_name</span><span class="o">=</span><span class="n">table_name</span><span class="p">,</span>
                <span class="n">server_address</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">local_server</span><span class="p">,</span>
                <span class="n">auth_client</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">auth</span><span class="p">,</span>
                <span class="n">max_retries</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_max_retries</span><span class="p">,</span>
                <span class="n">pool_maxsize</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_pool_maxsize</span><span class="p">,</span>
                <span class="n">pool_block</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_pool_block</span><span class="p">,</span>
                <span class="n">over_client</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_chunkedgraph</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">annotation</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_annotation</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_annotation</span> <span class="o">=</span> <span class="n">AnnotationClient</span><span class="p">(</span>
                <span class="n">server_address</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">local_server</span><span class="p">,</span>
                <span class="n">aligned_volume_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_aligned_volume_name</span><span class="p">,</span>
                <span class="n">auth_client</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">auth</span><span class="p">,</span>
                <span class="n">max_retries</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_max_retries</span><span class="p">,</span>
                <span class="n">pool_maxsize</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_pool_maxsize</span><span class="p">,</span>
                <span class="n">pool_block</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_pool_block</span><span class="p">,</span>
                <span class="n">over_client</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_annotation</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">materialize</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_materialize</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_materialize</span> <span class="o">=</span> <span class="n">MaterializationClient</span><span class="p">(</span>
                <span class="n">server_address</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">local_server</span><span class="p">,</span>
                <span class="n">auth_client</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">auth</span><span class="p">,</span>
                <span class="n">datastack_name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_datastack_name</span><span class="p">,</span>
                <span class="n">synapse_table</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">info</span><span class="o">.</span><span class="n">get_datastack_info</span><span class="p">()</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;synapse_table&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
                <span class="n">max_retries</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_max_retries</span><span class="p">,</span>
                <span class="n">pool_maxsize</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_pool_maxsize</span><span class="p">,</span>
                <span class="n">pool_block</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_pool_block</span><span class="p">,</span>
                <span class="n">over_client</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span>
                <span class="n">desired_resolution</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">desired_resolution</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_materialize</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">state</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_state</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_state</span> <span class="o">=</span> <span class="n">JSONService</span><span class="p">(</span>
                <span class="n">server_address</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">server_address</span><span class="p">,</span>
                <span class="n">auth_client</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">auth</span><span class="p">,</span>
                <span class="n">ngl_url</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">info</span><span class="o">.</span><span class="n">viewer_site</span><span class="p">(),</span>
                <span class="n">max_retries</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_max_retries</span><span class="p">,</span>
                <span class="n">pool_maxsize</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_pool_maxsize</span><span class="p">,</span>
                <span class="n">pool_block</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_pool_block</span><span class="p">,</span>
                <span class="n">over_client</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_state</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">l2cache</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_l2cache</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">seg_source</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">info</span><span class="o">.</span><span class="n">segmentation_source</span><span class="p">()</span>
            <span class="n">table_name</span> <span class="o">=</span> <span class="n">seg_source</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_l2cache</span> <span class="o">=</span> <span class="n">L2CacheClient</span><span class="p">(</span>
                <span class="n">server_address</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">local_server</span><span class="p">,</span>
                <span class="n">auth_client</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">auth</span><span class="p">,</span>
                <span class="n">table_name</span><span class="o">=</span><span class="n">table_name</span><span class="p">,</span>
                <span class="n">max_retries</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_max_retries</span><span class="p">,</span>
                <span class="n">pool_maxsize</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_pool_maxsize</span><span class="p">,</span>
                <span class="n">pool_block</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_pool_block</span><span class="p">,</span>
                <span class="n">over_client</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_l2cache</span></div>
</pre></div>

           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020, Casey Schneider-Mizell, Forrest Collman, Sven Dorkenwald.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>